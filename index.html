<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Î¤Î±Î¾Î¯Î´Î¹ Î ÏÎ­Î²ÎµÎ¶Î± 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --main-bg: #f7fafc;
      --main-text: #222;
      --accent: #0099cc;
      --tab-bg: #fff;
      --tab-active: #e0f4ff;
      --header-bg: #0099cc;
      --header-text: #fff;
      --card-bg: #fff;
      --shadow: 0 2px 8px #0001;
      --input-bg: #f7fafc;
      --btn-bg: #0099cc;
      --btn-text: #fff;
      --danger: #e74c3c;
    }
    body {
      font-family: 'Montserrat', Arial, sans-serif;
      background: var(--main-bg);
      color: var(--main-text);
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    header {
      background: var(--header-bg);
      color: var(--header-text);
      padding: 28px 12px 16px 12px;
      text-align: center;
      border-radius: 0 0 18px 18px;
      font-size: 2em;
      font-weight: 600;
      letter-spacing: 1px;
    }
    main {
      padding: 20px 15px 40px 15px;
      max-width: 900px;
      margin: 0 auto;
    }
    label {
      font-weight: 600;
      font-size: 1.1em;
    }
    select {
      width: 100%;
      font-size: 1em;
      padding: 8px;
      margin: 12px 0 20px 0;
      border-radius: 6px;
      border: 1px solid #bbb;
      background: var(--input-bg);
      color: var(--main-text);
      cursor: pointer;
    }
    .tab-section {
      display: none;
    }
    .tab-section.active {
      display: block;
      animation: fadeIn 0.35s ease-in-out;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 18px;
      background: var(--card-bg);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: var(--shadow);
      font-size: 0.95em;
    }
    th, td {
      padding: 10px 8px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    th {
      background: var(--tab-active);
      color: var(--main-text);
      font-weight: 700;
    }
    button {
      background: var(--btn-bg);
      color: var(--btn-text);
      border: none;
      border-radius: 5px;
      padding: 10px 18px;
      font-size: 1em;
      cursor: pointer;
      margin-top: 6px;
    }
    button:active {
      background: #0077aa;
    }
    button.danger {
      background: var(--danger);
    }
    input[type="text"], input[type="date"], input[type="number"], select, textarea {
      width: 100%;
      padding: 9px;
      margin: 7px 0;
      border: 1px solid #bbb;
      border-radius: 5px;
      font-size: 1em;
      background: var(--input-bg);
      color: var(--main-text);
    }
    textarea {
      resize: vertical;
    }
    .filter-bar { margin-bottom: 12px; display: flex; gap: 8px; }
    .filter-btn {
      background: var(--tab-bg); color: var(--accent); border: 1px solid var(--accent); border-radius: 5px; padding: 6px 14px; font-size: 1em; cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .filter-btn.active {
      background: var(--accent); color: #fff;
    }
    .place-list { list-style: none; padding: 0; }
    .place-item { background: var(--card-bg); margin-bottom: 12px; border-radius: 8px; box-shadow: var(--shadow); padding: 12px; position: relative;}
    .place-title { font-weight: bold; font-size: 1.1em; margin-bottom: 4px; display: flex; align-items: center; gap: 6px;}
    .place-actions { position: absolute; top: 10px; right: 12px; display: flex; gap: 8px; }
    .action-btn { background: none; border: none; font-size: 1.2em; cursor: pointer; }
    .gallery { display: flex; gap: 7px; flex-wrap: wrap; margin-top: 6px; }
    .gallery img { width: 78px; height: 78px; object-fit: cover; border-radius: 6px; border: 1.5px solid #e9f2fb; }
    .edit-form { margin-top: 10px; background: var(--tab-active); border-radius: 7px; padding: 10px; }
    .map-btn { background: #eee; color: var(--accent); border: none; border-radius: 4px; padding: 5px 13px; font-size: 0.95em; margin-left: 4px; cursor: pointer;}
    .extra-expense-list { list-style: none; padding: 0; }
    .extra-expense-item { background: var(--card-bg); margin-bottom: 10px; border-radius: 8px; box-shadow: var(--shadow); padding: 10px 12px; display: flex; align-items: center; gap: 10px;}
    .extra-expense-total { font-weight: bold; font-size: 1.1em; color: var(--accent); margin-top: 12px; }
    @media (max-width: 600px) {
      header { font-size: 1.3em; }
      th, td { font-size: 0.97em; }
      button { font-size: 0.95em; }
      .gallery img { width: 58px; height: 58px; }
    }
  </style>
</head>
<body>
  <header>
    Î¤Î±Î¾Î¯Î´Î¹ Î ÏÎ­Î²ÎµÎ¶Î± 2025
  </header>
  <main>
    <label for="tabSelect">Î•Ï€Î¯Î»ÎµÎ¾Îµ ÎºÎ±ÏÏ„Î­Î»Î±:</label>
    <select id="tabSelect" aria-label="Î•Ï€Î¹Î»Î¿Î³Î® ÎºÎ±ÏÏ„Î­Î»Î±Ï‚" onchange="showTabBySelect()">
      <option value="programma">ğŸ“… Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î±</option>
      <option value="exoda">ğŸ’¶ ÎˆÎ¾Î¿Î´Î±</option>
      <option value="paralies">ğŸ–ï¸ Î Î±ÏÎ±Î»Î¯ÎµÏ‚ & Î¤Î± Î¼Î­ÏÎ· Î¼Î¿Ï…</option>
      <option value="epipleon_exoda">â• Î•Ï€Î¹Ï€Î»Î­Î¿Î½ Î­Î¾Î¿Î´Î±</option>
    </select>

    <section id="programma" class="tab-section active" aria-label="Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î—Î¼ÎµÏÏÎ½ Î”Î¹Î±ÎºÎ¿Ï€ÏÎ½">
      <h2>Î ÏÏŒÎ³ÏÎ±Î¼Î¼Î± Î—Î¼ÎµÏÏÎ½ Î”Î¹Î±ÎºÎ¿Ï€ÏÎ½</h2>
      <table>
        <tr><th>Î—Î¼Î­ÏÎ±</th><th>Î ÏÏ‰Î¯/ÎœÎµÏƒÎ·Î¼Î­ÏÎ¹</th><th>Î‘Ï€ÏŒÎ³ÎµÏ…Î¼Î±/Î’ÏÎ¬Î´Ï…</th></tr>
        <tr><td>12/8 (Î¤ÏÎ¯Ï„Î·)</td><td>Î†Ï†Î¹Î¾Î· & Î•Î³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· ÏƒÏ„Î¿ Camping</td><td>Î§Î±Î»Î±ÏÎ® Î²ÏŒÎ»Ï„Î± ÏƒÏ„Î·Î½ Ï€Î±ÏÎ±Î»Î¯Î± ÎœÎ¿Î½Î¿Î»Î¯Î¸Î¹</td></tr>
        <tr><td>13/8 (Î¤ÎµÏ„Î¬ÏÏ„Î·)</td><td>ÎœÏ€Î¬Î½Î¹Î¿ ÏƒÎµ Ï€Î±ÏÎ±Î»Î¯Î± (Ï€.Ï‡. ÎŒÏÎ¼Î¿Ï‚ Ï„Î¿Ï… ÎŸÎ´Ï…ÏƒÏƒÎ­Î±)</td><td>Î’ÏŒÎ»Ï„Î± ÏƒÏ„Î·Î½ Ï€ÏŒÎ»Î· Ï„Î·Ï‚ Î ÏÎ­Î²ÎµÎ¶Î±Ï‚</td></tr>
        <tr><td>14/8 (Î Î­Î¼Ï€Ï„Î·)</td><td>Î•ÎºÎ´ÏÎ¿Î¼Î® ÏƒÎµ Î¬Î»Î»Î· Ï€Î±ÏÎ±Î»Î¯Î± (Ï€.Ï‡. Î‘ÏÏ„Î¿Î»Î¯Î¸Î¹Î±/Î‘Î»Ï‰Î½Î¬ÎºÎ¹)</td><td>Î§Î±Î»Î¬ÏÏ‰ÏƒÎ·, Î²ÏÎ±Î´Î¹Î½Î® Î­Î¾Î¿Î´Î¿Ï‚ ÏƒÏ„Î¿ camping Î® ÎºÎ¿Î½Ï„Î¬</td></tr>
        <tr><td>15/8 (Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®)</td><td>Î•ÎºÎ´ÏÎ¿Î¼Î® ÏƒÏ„Î± Î£ÏÎ²Î¿Ï„Î±</td><td>Î’ÏÎ±Î´Î¹Î½Î® Î²ÏŒÎ»Ï„Î±/Ï†Î±Î³Î·Ï„ÏŒ ÏƒÏ„Î¿ camping</td></tr>
        <tr><td>16/8 (Î£Î¬Î²Î²Î±Ï„Î¿)</td><td>Î•ÎºÎ´ÏÎ¿Î¼Î® ÏƒÏ„Î¹Ï‚ Î Î·Î³Î­Ï‚ Î‘Ï‡Î­ÏÎ¿Î½Ï„Î±</td><td>ÎÎµÎºÎ¿ÏÏÎ±ÏƒÎ·, Ï‡Î±Î»Î¬ÏÏ‰ÏƒÎ· ÏƒÏ„Î¿ camping</td></tr>
        <tr><td>17/8 (ÎšÏ…ÏÎ¹Î±ÎºÎ®)</td><td>ÎœÏ€Î¬Î½Î¹Î¿ ÏƒÏ„Î· Î›Ï…Î³Î¹Î¬ Î® Î¬Î»Î»Î· Ï€Î±ÏÎ±Î»Î¯Î±</td><td>Î’ÏŒÎ»Ï„Î±/Ï€Î¿Ï„ÏŒ ÏƒÏ„Î·Î½ Ï€Î±ÏÎ±Î»Î¯Î± Î® Ï„Î¿ camping</td></tr>
        <tr><td>18/8 (Î”ÎµÏ…Ï„Î­ÏÎ±)</td><td>ÎœÏ€Î¬Î½Î¹Î¿ ÏƒÏ„Î· Î£ÎºÎ¬Î»Î± (Î‘Î¼Î¼Î¿Ï…Î´Î¹Î¬)</td><td>Î’ÏÎ±Î´Î¹Î½Î® Î²ÏŒÎ»Ï„Î±</td></tr>
        <tr><td>19/8 (Î¤ÏÎ¯Ï„Î·)</td><td>Î•Î»ÎµÏÎ¸ÎµÏÎ· Î¼Î­ÏÎ± / Î ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÎ® ÎµÎºÎ´ÏÎ¿Î¼Î®</td><td>Î•Î»ÎµÏÎ¸ÎµÏÎ¿ Ï€ÏÏŒÎ³ÏÎ±Î¼Î¼Î±</td></tr>
        <tr><td>20/8 (Î¤ÎµÏ„Î¬ÏÏ„Î·)</td><td>Î‘Î½Î±Ï‡ÏÏÎ·ÏƒÎ·</td><td>-</td></tr>
      </table>
    </section>

    <section id="exoda" class="tab-section" aria-label="Î‘Î½Î±Î»Ï…Ï„Î¹ÎºÏŒÏ‚ Î Î¯Î½Î±ÎºÎ±Ï‚ Î•Î¾ÏŒÎ´Ï‰Î½">
      <h2>Î‘Î½Î±Î»Ï…Ï„Î¹ÎºÏŒÏ‚ Î Î¯Î½Î±ÎºÎ±Ï‚ Î•Î¾ÏŒÎ´Ï‰Î½</h2>
      <table>
        <tr><th>ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±</th><th>Î Î¿ÏƒÏŒ (â‚¬)</th></tr>
        <tr><td>Î”Î¹ÏŒÎ´Î¹Î± (Î¼ÎµÏ„â€™ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚)</td><td>76,20</td></tr>
        <tr><td>Î”Î¹Î±Î¼Î¿Î½Î®</td><td>160,00</td></tr>
        <tr><td>Î¦Î±Î³Î·Ï„ÏŒ (8 Î·Î¼Î­ÏÎµÏ‚ x 60â€¯â‚¬/Î·Î¼Î­ÏÎ±)</td><td>480,00</td></tr>
        <tr><td>ÎšÎ±ÏÏƒÎ¹Î¼Î± Î‘Î¸Î®Î½Î±â€“Î ÏÎ­Î²ÎµÎ¶Î±â€“Î‘Î¸Î®Î½Î±</td><td>134,05</td></tr>
        <tr><td>ÎšÎ±ÏÏƒÎ¹Î¼Î± Î ÏÎ­Î²ÎµÎ¶Î±â€“Î£ÏÎ²Î¿Ï„Î±â€“Î ÏÎ­Î²ÎµÎ¶Î±</td><td>33,59</td></tr>
        <tr><td>ÎšÎ±ÏÏƒÎ¹Î¼Î± Î ÏÎ­Î²ÎµÎ¶Î±â€“Î Î·Î³Î­Ï‚ Î‘Ï‡Î­ÏÎ¿Î½Ï„Î±â€“Î ÏÎ­Î²ÎµÎ¶Î±</td><td>20,99</td></tr>
        <tr><td>ÎšÎ±ÏÏƒÎ¹Î¼Î± Î ÏÎ­Î²ÎµÎ¶Î± (Ï€Î±ÏÎ±Î»Î¯Î±)</td><td>5,01</td></tr>
        <tr><td>Î‘ÏÏ„Î¿Î»Î¯Î¸Î¹Î± (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)</td><td>5,39</td></tr>
        <tr><td>ÎŒÏÎ¼Î¿Ï‚ Ï„Î¿Ï… ÎŸÎ´Ï…ÏƒÏƒÎ­Î± (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)</td><td>6,16</td></tr>
        <tr><td>Î‘Î»Ï‰Î½Î¬ÎºÎ¹ (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)</td><td>7,32</td></tr>
        <tr><td>Î£ÎºÎ¬Î»Î±/Î‘Î¼Î¼Î¿Ï…Î´Î¹Î¬ (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)</td><td>12,33</td></tr>
        <tr><td>Î›Ï…Î³Î¹Î¬ (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)</td><td>8,86</td></tr>
        <tr><td><strong>Î£ÏÎ½Î¿Î»Î¿</strong></td><td><strong>949,90</strong></td></tr>
        <tr><td><strong>Î‘Ï€ÏÏŒÎ²Î»ÎµÏ€Ï„Î± Î­Î¾Î¿Î´Î± (10%)</strong></td><td><strong>94,99</strong></td></tr>
        <tr><td><strong>Î¤ÎµÎ»Î¹ÎºÏŒ ÏƒÏÎ½Î¿Î»Î¿</strong></td><td><strong>1.044,89</strong></td></tr>
      </table>
      <button onclick="exportCSV()">Î•Î¾Î±Î³Ï‰Î³Î® ÎµÎ¾ÏŒÎ´Ï‰Î½ ÏƒÎµ CSV</button>
    </section>

    <section id="paralies" class="tab-section" aria-label="Î Î±ÏÎ±Î»Î¯ÎµÏ‚ ÎºÎ±Î¹ Î¤Î± Î¼Î­ÏÎ· Î¼Î¿Ï…">
      <h2>Î Î±ÏÎ±Î»Î¯ÎµÏ‚ & ÎšÏŒÏƒÏ„Î¿Ï‚ Î’ÎµÎ½Î¶Î¯Î½Î·Ï‚ (ÏƒÏ„Î±Î¸ÎµÏÎ­Ï‚ ÎµÎ³Î³ÏÎ±Ï†Î­Ï‚)</h2>
      <table>
        <tr><th>Î Î±ÏÎ±Î»Î¯Î±</th><th>Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ· (Ï‡Î»Î¼)</th><th>ÎšÏŒÏƒÏ„Î¿Ï‚ Î²ÎµÎ½Î¶Î¯Î½Î·Ï‚ (â‚¬)</th><th>Î§Î¬ÏÏ„Î·Ï‚</th></tr>
        <tr><td>Î‘ÏÏ„Î¿Î»Î¯Î¸Î¹Î± ğŸï¸</td><td>28</td><td>5,39</td><td><a href="https://www.google.com/maps?q=39.114986233448626,20.607195636710788&z=15" target="_blank">Î§Î¬ÏÏ„Î·Ï‚</a></td></tr>
        <tr><td>ÎŒÏÎ¼Î¿Ï‚ Ï„Î¿Ï… ÎŸÎ´Ï…ÏƒÏƒÎ­Î± ğŸ–ï¸</td><td>32</td><td>6,16</td><td><a href="https://www.google.com/maps?q=39.21648828227805,20.48718886684315&z=15" target="_blank">Î§Î¬ÏÏ„Î·Ï‚</a></td></tr>
        <tr><td>Î‘Î»Ï‰Î½Î¬ÎºÎ¹ ğŸï¸</td><td>38</td><td>7,32</td><td><a href="https://www.google.com/maps?q=39.00017997994942,20.72963790626479&z=15" target="_blank">Î§Î¬ÏÏ„Î·Ï‚</a></td></tr>
        <tr><td>Î£ÎºÎ¬Î»Î± (Î‘Î¼Î¼Î¿Ï…Î´Î¹Î¬) ğŸ–ï¸</td><td>64</td><td>12,33</td><td><a href="https://www.google.com/maps?q=39.212631268916866,20.490536263650814&z=15" target="_blank">Î§Î¬ÏÏ„Î·Ï‚</a></td></tr>
        <tr><td>Î›Ï…Î³Î¹Î¬ ğŸï¸</td><td>46</td><td>8,86</td><td><a href="https://www.google.com/maps?q=39.16040210258703,20.562154978232776&z=15" target="_blank">Î§Î¬ÏÏ„Î·Ï‚</a></td></tr>
      </table>
      <h3 style="margin-top:32px;">Î Î±ÏÎ±Î»Î¯ÎµÏ‚ Ï€Î¿Ï… Ï€ÏÏŒÏƒÎ¸ÎµÏƒÎµÏ‚ ÎµÏƒÏ (Ï€Î®Î³Î±Î¹Î½Î­-Î­Î»Î±)</h3>
      <table id="beachesTable">
        <tr><th>Î Î±ÏÎ±Î»Î¯Î±</th><th>Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ· (Ï‡Î»Î¼, Ï€Î·Î³Î±Î¹Î½Î­-Î­Î»Î±)</th><th>ÎšÏŒÏƒÏ„Î¿Ï‚ Î²ÎµÎ½Î¶Î¯Î½Î·Ï‚ (â‚¬)</th><th>Î§Î¬ÏÏ„Î·Ï‚</th></tr>
      </table>
      <h3 style="margin-top:40px;">ğŸ“ ÎŒÎ»Î± Ï„Î± Î¼Î­ÏÎ· Ï€Î¿Ï… ÎµÏ€Î¹ÏƒÎºÎ­Ï†Î¸Î·ÎºÎµÏ‚</h3>
      <form id="placeForm" autocomplete="off">
        <input type="text" id="placeName" class="input" placeholder="ÎŒÎ½Î¿Î¼Î± Î¼Î­ÏÎ¿Ï…Ï‚" required>
        <select id="placeCategory" class="input">
          <option value="beach">Î Î±ÏÎ±Î»Î¯Î± ğŸ–ï¸</option>
          <option value="sight">Î‘Î¾Î¹Î¿Î¸Î­Î±Ï„Î¿ ğŸ›ï¸</option>
          <option value="food">Î¦Î±Î³Î·Ï„ÏŒ ğŸ½ï¸</option>
          <option value="other">Î†Î»Î»Î¿ ğŸ“</option>
        </select>
        <input type="date" id="visitDate" class="input">
        <textarea id="placeNotes" class="input" rows="2" placeholder="Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚"></textarea>
        <input type="file" id="placePhoto" class="input" multiple accept="image/*">
        <input type="hidden" id="placeLat">
        <input type="hidden" id="placeLon">
        <button type="submit" class="btn">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î¼Î­ÏÎ¿Ï…Ï‚</button>
      </form>
      <div class="filter-bar">
        <button class="filter-btn active" onclick="setPlaceFilter('all')">ÎŒÎ»Î±</button>
        <button class="filter-btn" onclick="setPlaceFilter('beach')">Î Î±ÏÎ±Î»Î¯ÎµÏ‚ ğŸ–ï¸</button>
        <button class="filter-btn" onclick="setPlaceFilter('sight')">Î‘Î¾Î¹Î¿Î¸Î­Î±Ï„Î± ğŸ›ï¸</button>
        <button class="filter-btn" onclick="setPlaceFilter('food')">Î¦Î±Î³Î·Ï„ÏŒ ğŸ½ï¸</button>
        <button class="filter-btn" onclick="setPlaceFilter('other')">Î†Î»Î»Î¿ ğŸ“</button>
      </div>
      <ul id="placeList" class="place-list"></ul>
      <h3 style="margin-top:40px;">ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î Î±ÏÎ±Î»Î¯Î±Ï‚ (Open-Meteo)</h3>
      <input id="beachSearchInput" class="input" type="text" placeholder="Î“ÏÎ¬ÏˆÎµ ÏŒÎ½Î¿Î¼Î± Ï€Î±ÏÎ±Î»Î¯Î±Ï‚ (ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬)">
      <button class="btn" onclick="searchBeachOpenMeteo()">Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
      <ul id="beachResults" class="place-list"></ul>
    </section>

    <section id="epipleon_exoda" class="tab-section" aria-label="Î•Ï€Î¹Ï€Î»Î­Î¿Î½ Î­Î¾Î¿Î´Î±">
      <h2>â• Î•Ï€Î¹Ï€Î»Î­Î¿Î½ ÎˆÎ¾Î¿Î´Î±</h2>
      <form id="extraExpenseForm" autocomplete="off">
        <input type="text" id="extraExpenseDesc" class="input" placeholder="Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® (Ï€.Ï‡. Ï€Î±Î³Ï‰Ï„ÏŒ, Ï€Î¬ÏÎºÎ¹Î½Î³Îº)">
        <input type="number" id="extraExpenseAmount" class="input" placeholder="Î Î¿ÏƒÏŒ (â‚¬)" min="0.01" step="0.01" required>
        <button type="submit" class="btn">Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÎµÎ¾ÏŒÎ´Î¿Ï…</button>
      </form>
      <ul id="extraExpenseList" class="extra-expense-list"></ul>
      <div id="extraExpenseTotal" class="extra-expense-total"></div>
    </section>
  </main>
  <script>
    const tabIDs = ["programma", "exoda", "paralies", "epipleon_exoda"];
    function showTabBySelect() {
      const t = document.getElementById('tabSelect').value;
      tabIDs.forEach(id => {
        document.getElementById(id).classList.toggle('active', id === t);
      });
      if(t === 'exoda') renderExtraExpenses();
      if(t === 'paralies') { renderPlaces(); renderBeachesTable(); }
      if(t === 'epipleon_exoda') renderExtraExpenses();
    }
    document.getElementById('tabSelect').addEventListener('change', showTabBySelect);

    function toggleDarkMode() {
      const dark = document.documentElement.getAttribute('data-theme') === 'dark';
      document.documentElement.setAttribute('data-theme', dark ? '' : 'dark');
      localStorage.setItem('theme', dark ? 'light' : 'dark');
      document.querySelector('.dark-toggle').innerText = dark ? 'ğŸŒ™' : 'â˜€ï¸';
    }
    if(localStorage.getItem('theme') === 'dark') {
      document.documentElement.setAttribute('data-theme', 'dark');
      document.querySelector('.dark-toggle').innerText = 'â˜€ï¸';
    }

    // Export CSV
    function exportCSV() {
      const rows = [
        ["ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±","Î Î¿ÏƒÏŒ (â‚¬)"],
        ["Î”Î¹ÏŒÎ´Î¹Î± (Î¼ÎµÏ„â€™ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚)","76,20"],
        ["Î”Î¹Î±Î¼Î¿Î½Î®","160,00"],
        ["Î¦Î±Î³Î·Ï„ÏŒ (8 Î·Î¼Î­ÏÎµÏ‚ x 60â€¯â‚¬/Î·Î¼Î­ÏÎ±)","480,00"],
        ["ÎšÎ±ÏÏƒÎ¹Î¼Î± Î‘Î¸Î®Î½Î±â€“Î ÏÎ­Î²ÎµÎ¶Î±â€“Î‘Î¸Î®Î½Î±","134,05"],
        ["ÎšÎ±ÏÏƒÎ¹Î¼Î± Î ÏÎ­Î²ÎµÎ¶Î±â€“Î£ÏÎ²Î¿Ï„Î±â€“Î ÏÎ­Î²ÎµÎ¶Î±","33,59"],
        ["ÎšÎ±ÏÏƒÎ¹Î¼Î± Î ÏÎ­Î²ÎµÎ¶Î±â€“Î Î·Î³Î­Ï‚ Î‘Ï‡Î­ÏÎ¿Î½Ï„Î±â€“Î ÏÎ­Î²ÎµÎ¶Î±","20,99"],
        ["ÎšÎ±ÏÏƒÎ¹Î¼Î± Î ÏÎ­Î²ÎµÎ¶Î± (Ï€Î±ÏÎ±Î»Î¯Î±)","5,01"],
        ["Î‘ÏÏ„Î¿Î»Î¯Î¸Î¹Î± (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)","5,39"],
        ["ÎŒÏÎ¼Î¿Ï‚ Ï„Î¿Ï… ÎŸÎ´Ï…ÏƒÏƒÎ­Î± (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)","6,16"],
        ["Î‘Î»Ï‰Î½Î¬ÎºÎ¹ (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)","7,32"],
        ["Î£ÎºÎ¬Î»Î±/Î‘Î¼Î¼Î¿Ï…Î´Î¹Î¬ (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)","12,33"],
        ["Î›Ï…Î³Î¹Î¬ (ÎºÎ±ÏÏƒÎ¹Î¼Î±, Ï€Î®Î³Î±Î¹Î½Îµ-Î­Î»Î±)","8,86"],
        ["Î£ÏÎ½Î¿Î»Î¿","949,90"],
        ["Î‘Ï€ÏÏŒÎ²Î»ÎµÏ€Ï„Î± Î­Î¾Î¿Î´Î± (10%)","94,99"],
        ["Î¤ÎµÎ»Î¹ÎºÏŒ ÏƒÏÎ½Î¿Î»Î¿","1.044,89"]
      ];
      let csv = rows.map(r => r.map(x => `"${x}"`).join(',')).join('\n');
      let blob = new Blob([csv], {type: 'text/csv'});
      let a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'exoda.csv';
      a.click();
    }
    // --- Î Î±ÏÎ±Î»Î¯ÎµÏ‚ & Î¤Î± Î¼Î­ÏÎ· Î¼Î¿Ï… ---
    function loadPlaces() { return JSON.parse(localStorage.getItem('my_places') || "[]"); }
    function savePlaces(places) { localStorage.setItem('my_places', JSON.stringify(places)); }
    let placeFilter = 'all', editIdx = null;
    function renderBeachesTable() {
      const places = loadPlaces();
      const beaches = places.filter(p => p.category === 'beach');
      const table = document.getElementById('beachesTable');
      table.innerHTML = `<tr><th>Î Î±ÏÎ±Î»Î¯Î±</th><th>Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ· (Ï‡Î»Î¼, Ï€Î·Î³Î±Î¹Î½Î­-Î­Î»Î±)</th><th>ÎšÏŒÏƒÏ„Î¿Ï‚ Î²ÎµÎ½Î¶Î¯Î½Î·Ï‚ (â‚¬)</th><th>Î§Î¬ÏÏ„Î·Ï‚</th></tr>`;
      beaches.forEach(beach => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${beach.name || ''}</td>
          <td>${beach.distance || ''}</td>
          <td>${beach.cost || ''}</td>
          <td>${(beach.lat && beach.lon) ? `<a class="map-btn" href="https://www.google.com/maps?q=${beach.lat},${beach.lon}&z=15" target="_blank">Î§Î¬ÏÏ„Î·Ï‚</a>` : ''}</td>
        `;
        table.appendChild(tr);
      });
    }
    function setPlaceFilter(val) {
      placeFilter = val;
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.filter-btn').forEach(btn => {
        if (btn.textContent.includes(val.charAt(0).toUpperCase() + val.slice(1)) || (val === 'all' && btn.textContent === 'ÎŒÎ»Î±')) btn.classList.add('active');
        if (val === 'beach' && btn.textContent.includes('Î Î±ÏÎ±Î»Î¯ÎµÏ‚')) btn.classList.add('active');
        if (val === 'sight' && btn.textContent.includes('Î‘Î¾Î¹Î¿Î¸Î­Î±Ï„Î±')) btn.classList.add('active');
        if (val === 'food' && btn.textContent.includes('Î¦Î±Î³Î·Ï„ÏŒ')) btn.classList.add('active');
        if (val === 'other' && btn.textContent.includes('Î†Î»Î»Î¿')) btn.classList.add('active');
      });
      renderPlaces();
      renderBeachesTable();
    }
    function categoryEmoji(cat) {
      if (cat === 'beach') return 'ğŸ–ï¸';
      if (cat === 'sight') return 'ğŸ›ï¸';
      if (cat === 'food') return 'ğŸ½ï¸';
      return 'ğŸ“';
    }
    function renderPlaces() {
      const list = document.getElementById('placeList');
      list.innerHTML = '';
      const places = loadPlaces();
      let filtered = places;
      if (placeFilter !== 'all') filtered = places.filter(p => p.category === placeFilter);
      filtered.forEach((place, idx) => {
        const li = document.createElement('li');
        li.className = 'place-item';
        if (editIdx === idx) {
          li.innerHTML = `
            <form class="edit-form" onsubmit="return false;">
              <input class="input" type="text" id="editPlaceName" value="${place.name || ''}" required>
              <select class="input" id="editPlaceCategory">
                <option value="beach" ${place.category === 'beach' ? 'selected' : ''}>Î Î±ÏÎ±Î»Î¯Î± ğŸ–ï¸</option>
                <option value="sight" ${place.category === 'sight' ? 'selected' : ''}>Î‘Î¾Î¹Î¿Î¸Î­Î±Ï„Î¿ ğŸ›ï¸</option>
                <option value="food" ${place.category === 'food' ? 'selected' : ''}>Î¦Î±Î³Î·Ï„ÏŒ ğŸ½ï¸</option>
                <option value="other" ${place.category === 'other' ? 'selected' : ''}>Î†Î»Î»Î¿ ğŸ“</option>
              </select>
              <input class="input" type="date" id="editVisitDate" value="${place.date || ''}">
              <textarea class="input" id="editPlaceNotes" rows="2">${place.notes || ''}</textarea>
              <input class="input" type="file" id="editPlacePhoto" accept="image/*" multiple>
              <button class="btn" onclick="saveEditPlace(${idx})">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button>
              <button class="btn danger" onclick="cancelEditPlace()">Î†ÎºÏ…ÏÎ¿</button>
            </form>`;
        } else {
          li.innerHTML = `
            <div class="place-title">${categoryEmoji(place.category)} ${place.name ? place.name : ''} ${place.date ? `<span style="font-size:0.9em;color:#888;">(${place.date})</span>` : ''}</div>
            <div style="margin-bottom:4px;">${place.notes ? place.notes : ''}</div>
            <div>
              ${place.distance ? `<span>Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ·: <b>${place.distance} Ï‡Î»Î¼</b></span> &nbsp;` : ''}
              ${place.cost ? `<span>ÎšÏŒÏƒÏ„Î¿Ï‚ Î²ÎµÎ½Î¶Î¯Î½Î·Ï‚: <b>${place.cost} â‚¬</b></span> &nbsp;` : ''}
              ${(place.lat && place.lon) ? `<a href="https://www.google.com/maps?q=${place.lat},${place.lon}&z=15" target="_blank" style="margin-left:10px;">Î§Î¬ÏÏ„Î·Ï‚</a>` : ''}
            </div>
            <div class="gallery">${place.photos && place.photos.length ? place.photos.map(src => `<img src="${src}" alt="photo">`).join('') : ''}</div>
            <div class="place-actions">
              <button class="action-btn" title="Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±" onclick="editPlace(${idx})">âœï¸</button>
              <button class="action-btn" title="Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î±Ï‚" onclick="addPhotoPlace(${idx})">ğŸ“·</button>
              <button class="action-btn" title="Î”Î¹Î±Î³ÏÎ±Ï†Î®" onclick="deletePlace(${idx})">ğŸ—‘ï¸</button>
            </div>
          `;
        }
        list.appendChild(li);
      });
    }
    function editPlace(idx) {
      editIdx = idx;
      renderPlaces();
    }
    function cancelEditPlace() {
      editIdx = null;
      renderPlaces();
    }
    function saveEditPlace(idx) {
      const places = loadPlaces();
      const name = document.getElementById('editPlaceName').value.trim();
      const category = document.getElementById('editPlaceCategory').value;
      const date = document.getElementById('editVisitDate').value;
      const notes = document.getElementById('editPlaceNotes').value.trim();
      const files = document.getElementById('editPlacePhoto').files;
      if (name) {
        places[idx].name = name;
        places[idx].category = category;
        places[idx].date = date;
        places[idx].notes = notes;
        if (files.length) {
          for (let i = 0; i < files.length; i++) {
            const file = files[i];
            if (file.type.startsWith('image/')) {
              const reader = new FileReader();
              reader.onload = function (e) {
                places[idx].photos = places[idx].photos || [];
                places[idx].photos.push(e.target.result);
                savePlaces(places);
                editIdx = null;
                renderPlaces();
                renderBeachesTable();
              };
              reader.readAsDataURL(file);
              return;
            }
          }
        }
        savePlaces(places);
        editIdx = null;
        renderPlaces();
        renderBeachesTable();
      }
    }
    function addPhotoPlace(idx) {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.multiple = true;
      input.onchange = async function () {
        const files = input.files;
        if (files.length) {
          const places = loadPlaces();
          for (let i = 0; i < files.length; i++) {
            const file = files[i];
            if (file.type.startsWith('image/')) {
              const dataUrl = await new Promise(res => {
                const reader = new FileReader();
                reader.onload = e => res(e.target.result);
                reader.readAsDataURL(file);
              });
              places[idx].photos = places[idx].photos || [];
              places[idx].photos.push(dataUrl);
            }
          }
          savePlaces(places);
          renderPlaces();
          renderBeachesTable();
        }
      };
      input.click();
    }
    function deletePlace(idx) {
      const places = loadPlaces();
      places.splice(idx, 1);
      savePlaces(places);
      renderPlaces();
      renderBeachesTable();
    }
    document.getElementById('placeForm').onsubmit = async function (e) {
      e.preventDefault();
      const name = document.getElementById('placeName').value.trim();
      const category = document.getElementById('placeCategory').value;
      const date = document.getElementById('visitDate').value;
      const notes = document.getElementById('placeNotes').value.trim();
      const files = document.getElementById('placePhoto').files;
      const photos = [];
      let lat = document.getElementById('placeLat').value || undefined;
      let lon = document.getElementById('placeLon').value || undefined;
      if (files.length) {
        for (let i = 0; i < files.length; i++) {
          const file = files[i];
          if (file.type.startsWith('image/')) {
            const dataUrl = await new Promise(res => {
              const reader = new FileReader();
              reader.onload = e => res(e.target.result);
              reader.readAsDataURL(file);
            });
            photos.push(dataUrl);
          }
        }
      }
      let entry = { name, category, date, notes, photos };
      if (category === 'beach' && lat && lon) {
        const campingLat = 39.03429886578638, campingLon = 20.71407961748482;
        const beachLat = parseFloat(lat), beachLon = parseFloat(lon);
        const consumption = 7, fuelPrice = 1.75;
        const distanceOneWay = haversine(campingLat, campingLon, beachLat, beachLon);
        const distance = (distanceOneWay * 2).toFixed(1);
        const cost = ((distance / 100) * consumption * fuelPrice).toFixed(2);
        entry.lat = beachLat;
        entry.lon = beachLon;
        entry.distance = distance;
        entry.cost = cost;
      }
      const places = loadPlaces();
      places.unshift(entry);
      savePlaces(places);
      this.reset();
      document.getElementById('placeLat').value = '';
      document.getElementById('placeLon').value = '';
      renderPlaces();
      renderBeachesTable();
    };
    function haversine(lat1, lon1, lat2, lon2) {
      const R = 6371;
      const toRad = deg => deg * Math.PI / 180;
      const dLat = toRad(lat2 - lat1);
      const dLon = toRad(lon2 - lon1);
      const a = Math.sin(dLat / 2) ** 2 + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) ** 2;
      return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    }
    function searchBeachOpenMeteo() {
      const input = document.getElementById('beachSearchInput');
      const resultsList = document.getElementById('beachResults');
      let query = input.value.trim();
      if (!query) {
        resultsList.innerHTML = '';
        return;
      }
      resultsList.innerHTML = '<li>Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·...</li>';
      const url = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(query)}&country=GR&language=el&format=json`;
      fetch(url)
        .then(res => res.json())
        .then(data => {
          if (!data.results || !data.results.length) {
            resultsList.innerHTML = '<li>Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€Î±ÏÎ±Î»Î¯Î± Î® Ï„Î¿Ï€Ï‰Î½ÏÎ¼Î¹Î¿ Î¼Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± ÏƒÏ„Î·Î½ Î•Î»Î»Î¬Î´Î±.</li>';
            return;
          }
          resultsList.innerHTML = data.results.map(loc => `
            <li class="place-item">
              <div class="place-title">ğŸ–ï¸ ${loc.name}${loc.admin1 ? `, ${loc.admin1}` : ''}${loc.country ? `, ${loc.country}` : ''}</div>
              <div>Î£Ï…Î½Ï„ÎµÏ„Î±Î³Î¼Î­Î½ÎµÏ‚: <b>${loc.latitude}, ${loc.longitude}</b></div>
              <button class="btn" onclick="window.open('https://www.openstreetmap.org/?mlat=${loc.latitude}&mlon=${loc.longitude}&zoom=15','_blank')">Î ÏÎ¿Î²Î¿Î»Î® ÏƒÏ„Î¿Î½ Ï‡Î¬ÏÏ„Î·</button>
              <button class="btn" style="background:#20b46a;" onclick='addBeachToPlaces({
                "display_name":"${loc.name}${loc.admin1 ? ', '+loc.admin1 : ''}${loc.country ? ', '+loc.country : ''}",
                "lat":${loc.latitude},
                "lon":${loc.longitude}
              })'>Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÏƒÏ„Î± Î¼Î­ÏÎ· Î¼Î¿Ï…</button>
            </li>
          `).join('');
        }).catch(() => {
          resultsList.innerHTML = '<li>Î£Ï†Î¬Î»Î¼Î± ÏƒÏÎ½Î´ÎµÏƒÎ·Ï‚ ÏƒÏ„Î¿ Open-Meteo API. Î ÏÎ¿ÏƒÏ€Î±Î¸Î®ÏƒÏ„Îµ Î¾Î±Î½Î¬ Î±ÏÎ³ÏŒÏ„ÎµÏÎ±.</li>';
        });
    }
    function addBeachToPlaces(loc) {
      const campingLat = 39.03429886578638, campingLon = 20.71407961748482;
      const beachLat = parseFloat(loc.lat), beachLon = parseFloat(loc.lon);
      const distanceOneWay = haversine(campingLat, campingLon, beachLat, beachLon);
      const distance = (distanceOneWay * 2).toFixed(1); // Î Î·Î³Î±Î¹Î½Î­-Î­Î»Î±
      const consumption = 7, fuelPrice = 1.75;
      const cost = ((distance / 100) * consumption * fuelPrice).toFixed(2);
      const places = loadPlaces();
      if (places.some(p => p.name === loc.display_name && p.lat == beachLat && p.lon == beachLon)) {
        alert("Î¤Î¿ Î¼Î­ÏÎ¿Ï‚ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ Î®Î´Î· ÏƒÏ„Î· Î»Î¯ÏƒÏ„Î±!");
        return;
      }
      places.unshift({
        name: loc.display_name,
        category: 'beach',
        date: '', notes: '',
        distance, cost, lat: beachLat, lon: beachLon, photos: []
      });
      savePlaces(places);
      alert("Î¤Î¿ Î¼Î­ÏÎ¿Ï‚ Ï€ÏÎ¿ÏƒÏ„Î­Î¸Î·ÎºÎµ ÏƒÏ„Î± 'ÎœÎ­ÏÎ· Î¼Î¿Ï…'!");
      renderPlaces();
      renderBeachesTable();
    }
    // --- Î•Ï€Î¹Ï€Î»Î­Î¿Î½ Î­Î¾Î¿Î´Î± ---
    function saveExtraExpenses(list) {
      localStorage.setItem('my_extra_expenses', JSON.stringify(list));
    }
    function loadExtraExpenses() {
      return JSON.parse(localStorage.getItem('my_extra_expenses') || "[]");
    }
    function renderExtraExpenses() {
      const listEl = document.getElementById('extraExpenseList');
      listEl.innerHTML = '';
      const list = loadExtraExpenses();
      let total = 0;
      list.forEach((item, idx) => {
        total += Number(item.amount) || 0;
        const li = document.createElement('li');
        li.className = 'extra-expense-item';
        li.innerHTML = `
          <span>${item.desc ? item.desc : 'â€”'}</span>
          <span style="margin-left:auto;">${Number(item.amount).toFixed(2)} â‚¬</span>
          <button class="btn danger" style="padding:4px 10px;font-size:0.95em;" onclick="deleteExtraExpense(${idx})">âœ—</button>
        `;
        listEl.appendChild(li);
      });
      document.getElementById('extraExpenseTotal').innerHTML =
        "Î£ÏÎ½Î¿Î»Î¿ ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ ÎµÎ¾ÏŒÎ´Ï‰Î½: " + total.toFixed(2) + " â‚¬";
    }
    function deleteExtraExpense(idx) {
      const list = loadExtraExpenses();
      list.splice(idx,1);
      saveExtraExpenses(list);
      renderExtraExpenses();
    }
    document.getElementById('extraExpenseForm').onsubmit = function(e){
      e.preventDefault();
      const desc = document.getElementById('extraExpenseDesc').value.trim();
      const amount = document.getElementById('extraExpenseAmount').value;
      if(!amount || isNaN(amount) || Number(amount)<=0) return;
      const list = loadExtraExpenses();
      list.unshift({desc, amount});
      saveExtraExpenses(list);
      this.reset();
      renderExtraExpenses();
    };

    // Î‘ÏÏ‡Î¹ÎºÎ¬ renders
    renderPlaces();
    renderBeachesTable();
    renderExtraExpenses();
  </script>
</body>
</html>
